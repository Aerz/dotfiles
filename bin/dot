#!/usr/bin/env bash

set -euo pipefail

CONTEXT="$1"
COMMAND="$2"

DOTFILES_PATH="${HOME}/dotfiles"
DOTFILES_SCRIPTS_PATH="${DOTFILES_PATH}/scripts"
COMMAND_EXEC="$DOTFILES_SCRIPTS_PATH/$COMMAND"

# stop if no command inserted
if [ -z "$COMMAND" ]; then; exit 0; fi

#Â throws an error if context does not exist
if [ ! -d "$CONTEXT" ]; then; exit 1; fi

# show sub command help does not exist
if [ ! -e "$COMMAND_EXEC" ]; then; exit 1; fi

# load the script
shift 2
source "$COMMAND_EXEC" $@

exit 0
